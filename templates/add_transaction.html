<!-- templates/add_transaction.html -->
{% extends "base.html" %}
{% block title %}新建交易{% endblock %}

{% block content %}
<h2 class="mb-4">新建交易记录</h2>
<form method="POST">
    <div class="row g-3">
        <div class="col-md-6">
            <label class="form-label">货品名称</label>
            <input type="text" name="product_name" class="form-control" required>
        </div>
        
        <div class="col-md-6">
            <label class="form-label">收货人</label>
            <input type="text" name="receiver" class="form-control" required>
        </div>

        <div class="col-md-4">
            <label class="form-label">送货日期</label>
            <input type="date" name="delivery_date" 
                   class="form-control datepicker" required>
        </div>

        <div class="col-md-4">
            <label class="form-label">发票日期（可选）</label>
            <input type="date" name="invoice_date" 
                   class="form-control datepicker">
        </div>

        <div class="col-md-4">
            <label class="form-label">单价</label>
            <input type="number" step="0.01" name="unit_price" 
                   class="form-control calculate-total" required>
        </div>
        
        <div class="col-md-4">
            <label class="form-label">数量</label>
            <input 
                type="number" 
                name="quantity" 
                class="form-control calculate-total" 
                step="0.01" 
                min="0.01" 
                required
                value="{{ form_data.quantity if form_data }}"
            >
        </div>

        <div class="col-md-4">
            <label class="form-label">单位</label>
            <select name="unit" class="form-select" required>
                <option value="kg">千克</option>
                <option value="g">克</option>
                <option value="t">吨</option>
                <option value="m">米</option>
                <option value="cm">厘米</option>
                <option value="pcs">个</option>
            </select>
        </div>

        <div class="col-md-4">
            <label class="form-label">总金额</label>
            <input type="hidden" name="total_amount" id="total-amount">
            <div class="form-control-plaintext" id="total-preview">0.00</div>
        </div>

        <div class="col-md-4">
            <label class="form-label">首次付款（可选）</label>
            <input type="number" step="0.01" name="initial_payment" 
                   class="form-control">
        </div>

        <div class="col-12">
            <button type="submit" class="btn btn-primary">提交交易</button>
        </div>
    </div>
</form>
{% endblock %}
